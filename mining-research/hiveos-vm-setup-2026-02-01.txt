[host]$ sudo virsh edit hiveos
Domain 'hiveos' XML configuration edited.

[host]$  sudo virsh start hiveos
  sudo virsh dumpxml hiveos | rg -n "target dev|bus="
Domain 'hiveos' started

43:      <target dev='sda' bus='sata'/>
45:      <address type='drive' controller='0' bus='0' target='0' unit='0'/>
49:      <address type='pci' domain='0x0000' bus='0x02' slot='0x00' function='0x0'/>
58:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0' multifunction='on'/>
64:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x1'/>
70:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x2'/>
76:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x3'/>
82:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x4'/>
88:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x5'/>
94:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x7'/>
106:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0' multifunction='on'/>
112:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x1'/>
118:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x2'/>
124:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x3'/>
130:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x4'/>
136:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x5'/>
140:      <address type='pci' domain='0x0000' bus='0x00' slot='0x1f' function='0x2'/>
144:      <address type='pci' domain='0x0000' bus='0x03' slot='0x00' function='0x0'/>
150:      <address type='pci' domain='0x0000' bus='0x01' slot='0x00' function='0x0'/>
168:      <address type='virtio-serial' controller='0' bus='0' port='1'/>
173:      <address type='virtio-serial' controller='0' bus='0' port='2'/>
175:    <input type='tablet' bus='usb'>
177:      <address type='usb' bus='0' port='1'/>
179:    <input type='mouse' bus='ps2'>
182:    <input type='keyboard' bus='ps2'>
191:      <address type='pci' domain='0x0000' bus='0x00' slot='0x1b' function='0x0'/>
197:      <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x0'/>
199:    <redirdev bus='usb' type='spicevmc'>
201:      <address type='usb' bus='0' port='2'/>
203:    <redirdev bus='usb' type='spicevmc'>
205:      <address type='usb' bus='0' port='3'/>
212:      <address type='pci' domain='0x0000' bus='0x05' slot='0x00' function='0x0'/>
217:      <address type='pci' domain='0x0000' bus='0x06' slot='0x00' function='0x0'/>

[host]$   sudo virsh console hiveos
Connected to domain 'hiveos'
Escape character is ^] (Ctrl + ])]

---

What you likely need next to mine from the VM (high-level checklist):
- Confirm GPU passthrough or compute device visibility inside the VM (HiveOS should see the GPU).
- Ensure the VM has network + time sync (HiveOS needs outbound access to its API and pool).
- Register the worker in HiveOS (farm/rig token) and apply a flight sheet.
- Verify storage: the VM disk you attached as sda is persistent and has HiveOS installed/bootable.
- Optional: pin CPU cores/memory hugepages if you’re doing CPU mining or want stable hashrate.

Short answer: “most profitable” depends entirely on your hardware and electricity cost, and it changes daily. We should pick a target after we know your GPU/CPU and $/kWh, then use a live calculator (WhatToMine/NiceHash) to choose the top coin for your exact rig. (whattomine.com (https://whattomine.com/?utm_source=openai))

That said, by hardware type:
- BTC: effectively ASIC-only. GPUs/CPUs won’t be competitive.
- XMR (Monero): CPU-mining (RandomX). GPUs aren’t efficient.
- Ravencoin (RVN): GPU-mining (KawPoW).
- TON: uses a PoW “giver” distribution mechanism; typically big CPU (32+ cores) or GPU with extra setup; ASICs aren’t used. (ton.me (https://ton.me/en/mining/?utm_source=openai))

So:
- If you passed through a GPU to HiveOS, RVN (and other GPU coins) are candidates.
- If you only have CPU in the VM, XMR or TON (if you have a very strong CPU) are candidates.
- If you want BTC, you’d need an ASIC attached/passthrough.

---

What we need next to mine from the VM:
1) Confirm GPU passthrough works in the HiveOS VM (or confirm you’re CPU-only).
2) Register the rig in HiveOS and apply a flight sheet.
3) Pick the most profitable coin with a live calculator using your exact hardware + $/kWh.
4) Start the miner and verify hashrate + temps.

HiveOS flight sheet basics are standard: create Wallet -> create Flight Sheet -> apply to worker. (hiveon.com (https://hiveon.com/knowledge-base/guides/how_to_start_mine_in_hiveon_os/?utm_source=openai))

---

I need these from you to choose the best coin:
- GPU model(s) (e.g., 3080, 3070, 1660, etc.)
- CPU model (if you want CPU mining)
- Electricity cost ($/kWh)
- Power limit you want to run (if you know)
- Is GPU passthrough actually visible inside HiveOS?

If you tell me those, I’ll give you the exact most-profitable coin (today) and the flight sheet settings. (whattomine.com (https://whattomine.com/?utm_source=openai))

1-4

---

Additional log (user):
[host]$  sudo virsh start hiveos
  sudo virsh dumpxml hiveos | rg -n "target dev|bus="
Domain 'hiveos' started

43:      <target dev='sda' bus='sata'/>
45:      <address type='drive' controller='0' bus='0' target='0' unit='0'/>
49:      <address type='pci' domain='0x0000' bus='0x02' slot='0x00' function='0x0'/>
58:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0' multifunction='on'/>
64:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x1'/>
70:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x2'/>
76:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x3'/>
82:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x4'/>

---

Additional log (sanitized):
$ sudo virsh domifaddr hiveos
$ sudo virsh dumpxml hiveos | rg -n "hostdev|vfio|graphics|video|target dev|bus="
Name       MAC address          Protocol     Address
-------------------------------------------------------------------------------

43:      <target dev='sda' bus='sata'/>
45:      <address type='drive' controller='0' bus='0' target='0' unit='0'/>
49:      <address type='pci' domain='0x0000' bus='0x02' slot='0x00' function='0x0'/>
58:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0' multifunction='on'/>
64:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x1'/>
70:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x2'/>
76:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x3'/>
82:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x4'/>
88:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x5'/>
94:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x6'/>
100:      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x7'/>
106:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0' multifunction='on'/>
112:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x1'/>
118:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x2'/>
124:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x3'/>
130:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x4'/>
136:      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x5'/>
140:      <address type='pci' domain='0x0000' bus='0x00' slot='0x1f' function='0x2'/>
144:      <address type='pci' domain='0x0000' bus='0x03' slot='0x00' function='0x0'/>
150:      <address type='pci' domain='0x0000' bus='0x01' slot='0x00' function='0x0'/>
168:      <address type='virtio-serial' controller='0' bus='0' port='1'/>
173:      <address type='virtio-serial' controller='0' bus='0' port='2'/>
175:    <input type='tablet' bus='usb'>
177:      <address type='usb' bus='0' port='1'/>
179:    <input type='mouse' bus='ps2'>
182:    <input type='keyboard' bus='ps2'>
185:    <graphics type='spice' port='5900' autoport='yes' listen='127.0.0.1'>
188:    </graphics>
191:      <address type='pci' domain='0x0000' bus='0x00' slot='0x1b' function='0x0'/>
194:    <video>
196:      <alias name='video0'/>
197:      <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x0'/>
198:    </video>
199:    <redirdev bus='usb' type='spicevmc'>
201:      <address type='usb' bus='0' port='2'/>
203:    <redirdev bus='usb' type='spicevmc'>
205:      <address type='usb' bus='0' port='3'/>
212:      <address type='pci' domain='0x0000' bus='0x05' slot='0x00' function='0x0'/>
217:      <address type='pci' domain='0x0000' bus='0x06' slot='0x00' function='0x0'/>

$ virsh list --all
Id   Name     State
------------------------
1    hiveos   running

$ virsh domstate hiveos
running

$ virsh domiflist hiveos
Interface   Type   Source   Model    MAC
---------------------------------------------------------
-           user   -        virtio   [REDACTED]

$ virsh net-list --all
Name         State      Autostart   Persistent
-------------------------------------------------
default      inactive   yes         yes
hiveos-net   inactive   yes         yes

$ virsh net-dhcp-leases default
Expiry Time   MAC address   Protocol   IP address   Hostname   Client ID or DUID
-----------------------------------------------------------------------------------

$ virsh dumpxml hiveos | rg -n "interface|network|bridge|mac"
13:    <partition>/machine</partition>
16:    <type arch='x86_64' machine='pc-q35-8.2'>hvm</type>
146:    <interface type='user'>
147:      <mac address='[REDACTED]'/>
151:    </interface>

$ virsh console hiveos
error: failed to get domain 'hiveos'

---

Additional log (sanitized):
$ sudo virsh net-dumpxml hiveos-net
$ sudo virsh net-start hiveos-net
$ sudo virsh net-info hiveos-net
<network>
  <name>hiveos-net</name>
  <uuid>[REDACTED]</uuid>
  <bridge name='virbr2' stp='on' delay='0'/>
  <mac address='[REDACTED]'/>
  <ip address='192.168.126.1' netmask='255.255.255.0'>
    <dhcp>
      <range start='192.168.126.100' end='192.168.126.254'/>
    </dhcp>
  </ip>
</network>

error: Failed to start network hiveos-net
error: internal error: Child process (VIR_BRIDGE_NAME=virbr2 /usr/sbin/dnsmasq --conf-file=/var/lib/libvirt/dnsmasq/hiveos-net.conf --leasefile-ro --dhcp-script=/usr/lib/libvirt/libvirt_leaseshelper) unexpected exit status 2:
dnsmasq: failed to create listening socket for 192.168.126.1: Address already in use

Name:           hiveos-net
UUID:           [REDACTED]
Active:         no
Persistent:     yes
Autostart:      yes
Bridge:         virbr2

---

2026-02-02 (VM networking fix + HiveOS registration notes)

Goal: Get HiveOS VM online (NAT) and registered without Wi-Fi.

Host changes (libvirt):
1) Create/modify hiveos-net on a new subnet and bridge:
   - Network: 192.168.200.0/24
   - Bridge: virbr9
   - DNS disabled (host has named on :53)
   - NAT enabled (forward mode nat)

2) Switch VM NIC to e1000e (HiveOS didn't see virtio NIC):
   - VM XML: <model type='e1000e'/>

3) Start hiveos-net and attach VM to it.

4) Allow forwarding on host (nftables):
   - Insert accept rules before reject:
     sudo nft insert rule ip filter FORWARD iifname "virbr9" oifname != "virbr9" accept
     sudo nft insert rule ip filter FORWARD oifname "virbr9" ct state related,established accept
   - Confirm ip_forward is enabled:
     sudo sysctl net.ipv4.ip_forward

5) Bring bridge up:
   - sudo ip link set virbr9 up

VM (HiveOS) networking:
- NIC appears as eth0 (altname enp1s0).
- If DHCP fails, set static:
  ip addr flush dev eth0
  ip addr add 192.168.200.122/24 dev eth0
  ip link set eth0 up
  ip route add default via 192.168.200.1
  printf "nameserver 1.1.1.1\nnameserver 8.8.8.8\n" > /etc/resolv.conf
  ping -c 2 api.hiveos.farm

HiveOS registration:
- Use new Rig ID + password.
- Wi-Fi setup skipped (no wlan0).

Status at end:
- VM can ping 1.1.1.1 and api.hiveos.farm after host forward rules.
- DNS on host is owned by named; keep libvirt DNS disabled.

---

2026-02-02 (XMRig mining on host)

Pool + wallet:
- Pool: pool.supportxmr.com:3333
- Wallet: 48APt2bFceYSBQyizrdwPn29tgHQLnKWcYXXCB7cucjBd5AzoG39X6FGkiDrANpq5hTct4drg6Q2WLn2hGCxUoaJQxNsebn

XMRig config:
~/.config/xmrig/config.json

Systemd user service:
~/.config/systemd/user/xmrig.service

Check mining:
- systemctl --user status xmrig
- journalctl --user -u xmrig -f

Control:
- systemctl --user stop xmrig
- systemctl --user start xmrig
- systemctl --user restart xmrig

Pool dashboard:
- https://www.supportxmr.com/ (paste wallet address)

XMRig source:
- Clone (not committed): https://github.com/xmrig/xmrig
- Local path: /home/fletchervaughn/code/witching-hour/xmrig
- Commit: 753859ca
